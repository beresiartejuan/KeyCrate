<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/pass.css') }}"/>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/menu.css') }}"/>
{% extends 'base.html' %}

{% block title %}KeyCrate{% endblock %}

{% block content %}

<div class="profile-container">
    <a href="/profile">
        <img src="{{ url_for('static', filename='img/profile.jpg') }}" alt="Logo" class="profile-image">
    </a>
</div>

<h1>Menu</h1>
<ul>
    <li>
        <a class="a" href="/agregar_contraseña">Agregar nueva contraseña</a>
    </li>
</ul>

<h2>Contraseñas Guardadas</h2>

<div class="site-cards-container">
    {% for password in passwords %}
    <div class="site-card">
        <div class="site-card-front">
            <h3>{{ password.sitio }}</h3>
        </div>
        <div class="site-card-back">
            <h3>Sitio: {{ password.sitio }}</h3>
            <p>Nombre de usuario: {{ password.username }}</p>
            <p>Contraseña: {{ password.password }}</p>
            <button class="copy-button" onclick="copyToClipboard('{{ password.username }}')">Copiar nombre de usuario</button>
            <button class="copy-button" onclick="copyToClipboard('{{ password.password }}')">Copiar contraseña</button>
            <form method="post" action="/eliminar_contraseña/{{ password.id }}" style="display: inline;">
                <button type="submit" class="delete-button">Eliminar</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>

<script>
    function copyToClipboard(text) {
        const el = document.createElement('textarea');
        el.value = text;
        document.body.appendChild(el);
        el.select();
        document.execCommand('copy');
        document.body.removeChild(el);
        alert('Texto copiado al portapapeles: ' + text);
    }
</script>

{% endblock %}